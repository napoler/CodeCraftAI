<规约 UID="spec-002">

  <details>
    <summary>元数据 (点击展开)</summary>
    <元数据>
      <标题>规约：自动化索引工具</标题>
      <摘要>开发一个自动化脚本，用于扫描所有已归档的规约，并自动生成全局的 `INDEX.md` 文件。</摘要>
      <分类>自动化工具</分类>
      <状态>已批准</状态>
      <负责人>@jules-ai</负责人>
      <流程级别>Tier-1</流程级别>
    </元数据>
  </details>

  <details>
    <summary>上下文 (点击展开)</summary>
    <上下文>
      <项目 名称="CodeCraftAI">
        <技术栈>Python</技术栈>
        <架构>CodeCraft Spec 驱动</架构>
      </项目>
      <关联>
        <原则>../../PRINCIPLES.md#5-唯一标识-everything-is-addressable</原则>
        <文档>../../INDEX.md</文档>
      </关联>
    </上下文>
  </details>

  <指令分析>
    <details>
      <summary>核心请求 (点击展开)</summary>
      <核心请求>
        <目标>将“索引更新”这一手动流程，转变为一个可靠的、可重复的自动化流程。</目标>
      </核心请求>
    </details>
  </指令分析>

  <实施计划>
    <details>
      <summary>阶段化开发 (点击展开)</summary>
      <阶段化开发>
        <核心功能>
          <功能 UID="spec-002-func-001">
            <名称>规约扫描与元数据提取</名称>
            <描述>实现一个能够递归扫描 `.codecraft/spec/` 目录下所有 `spec.md` 文件的扫描器。该扫描器需能解析 `<元数据>` 块，并提取出 UID, 标题, 摘要, 分类, 状态等关键字段。</描述>
            <测试策略>单元测试应覆盖：1. 找到并解析一个有效规约文件。 2. 忽略一个格式不正确的规约文件。 3. 能够正确处理空的子目录。</测试策略>
          </功能>
          <功能 UID="spec-002-func-002">
            <名称>生成分类化的 INDEX.md</名称>
            <描述>根据提取到的元数据，动态生成一个符合 `INDEX.md` v2 格式的 Markdown 文件，包含“核心框架”、“自动化工具”等层级分类。</描述>
            <测试策略>集成测试应验证：1. 生成的 `INDEX.md` 内容与预期的 Markdown 结构完全一致。 2. 当没有找到任何规约时，生成一个空的但结构正确的索引文件。</测试策略>
          </功能>
        </核心功能>
        <次要功能>
          <功能 UID="spec-002-func-003">
            <名称>功能级 UID 索引</名称>
            <描述>增强解析器，使其不仅能提取规约级的元数据，还能索引每个规约内部定义的所有 `<功能>` 标签及其 UID 和名称。</描述>
            <测试策略>单元测试需要验证解析器能否在一个规约文件中正确识别和提取出多个功能定义。</测试策略>
          </功能>
        </次要功能>
      </阶段化开发>
    </details>
  </实施计划>

</规约>
