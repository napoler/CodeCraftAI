# 标准 05：工具集与自动化标准

- **状态**: 已采纳
- **版本**: 1.1.0
- **日期**: 2024-08-17

---

## 1. 最高原则：文档驱动

本文件是本项目所有内置工具的**唯一权威使用规范**。

所有开发者（特别是AI开发者）在执行任何自动化操作之前，**必须**查阅并遵循本文档中定义的规则。

## 2. 工具集概览

### a. 核心工作流助手：`cli.py`

- **文件路径**: `.codecraft/scripts/cli.py`
- **核心用途**: 与本项目工作流交互的**唯一官方指定入口**。
- **何时使用**: 执行所有与“任务、规范、设计、安全删除、代码优化”相关的操作时。

#### **主要命令 (`python .codecraft/scripts/cli.py ...`)**
- `task new <title>`: 创建一个新任务。
- `task start <title>`: 开始一个任务。
- `task complete <title>`: 完成一个任务。
- `delete <path>`: 安全地删除一个文件。
- `trash list|restore|empty`: 管理垃圾桶。
- `ai format|lint-fix|doctor <path>`: 智能优化和修复代码。
- `--help`: 查看所有可用命令。

---

### b. 本地完整性验证脚本：`build.sh`

- **文件路径**: `.codecraft/scripts/build.sh`
- **核心用途**: 在本地模拟云端 CI/CD 环境，执行**完整**的项目健康检查。
- **何时使用**: 在发起 Pull Request **之前**，**必须**运行此脚本。

---

### c. 实时开发守护进程：`guardian.py`

- **文件路径**: `.codecraft/scripts/guardian.py`
- **核心用途**: 提供**即时**的代码质量反馈循环。
- **何时使用**: 在长时间的编码会话中，推荐在单独的终端中启动。

---
## 3. 工具交互原则与专家提示

- **优先使用 `cli.py`**: 对于 `cli.py` 已提供的功能，**严禁**使用更底层的原生命令。
- **信任 `build.sh`**: `build.sh` 的成功执行，是代码进入主分支的“黄金标准”。
- **善用 `guardian.py`**: 让“守护者”成为你编码时的伙伴。

### **专家提示 (针对 AI 开发者): `doctor` 的哲学**

`ai doctor` 命令不仅仅是一个修复工具，它更是一个诊断工具。

> 当 `doctor` 报告一个 `mypy` 类型错误时，不要仅仅试图“让错误消失”。一个优秀的工程师会把类型错误看作是一个**症状**。你应该反思：**为什么**会发生这个类型错误？它是否暴露了更深层次的数据结构设计缺陷或逻辑流程问题？请把修复一个类型错误的机会，看作是一次**重构并提升代码内在质量**的绝佳时机。
