# 贡献指南 (Contribution Guidelines)

欢迎你为 CodeCraftAI 项目贡献代码或文档！本指南旨在帮助每一位成员高效协作，并共同维护项目的长期健康。

## 1. 项目理念

我们不仅仅是在构建一个项目，更是在实践一套高效、透明、可追溯的开发哲学。我们建立的所有规范（Spec、ADR、Git工作流等）都是为了服务于以下核心目标：

*   **清晰优于聪明**: 我们更倾向于清晰、可读的代码和文档，而不是难以理解的“聪明”技巧。
*   **决策可追溯**: 任何重要的技术决策都应该被记录下来，以便未来的我们能够理解当时“为什么”这样做。
*   **自动化保障质量**: 我们相信应该让工具来做重复性的、易错的检查工作，让人类专注于创造性的、有价值的思考。
*   **文档驱动开发**: 我们在编码前思考和写作，确保我们在正确的方向上努力。

## 2. 我们的工具链

为了实现上述理念，我们采用了一套精心挑选的、行业标准的工具链。了解它们的作用将帮助你更好地为项目做贡献。

*   **`pytest`**: Python 的黄金标准测试框架。我们用它来保证代码的正确性和健壮性。
*   **`black`**: “不妥协”的代码格式化工具。它能终结所有关于代码风格的争论，让所有代码看起来都像一个人写的。
*   **`ruff`**: 极速的 Python Linter。它能在瞬间扫描代码，发现从简单语法错误到复杂逻辑缺陷的数百种问题。
*   **`pre-commit`**: Git 钩子管理器。它是我们的自动化质量守卫，在每次你提交代码时，它都会自动运行 `black` 和 `ruff`，确保不符合质量标准的代码无法进入我们的代码库。
*   **`pip-tools`**: 依赖管理工具。我们用它将 `pyproject.toml` 中定义的高级依赖，编译成包含精确版本号的 `requirements.txt` 文件，以确保环境的绝对可复现性。

## 3. 沟通语言

为了方便当前团队的沟通，我们约定所有公开的交流和文档编写均使用 **中文**。这包括 Git 提交信息、Pull Request、代码注释、规范文档等。

*注：随着项目的发展和国际化，未来可能会转为使用英语。*

## 4. 进度同步与任务管理

我们使用 **GitHub Issues** 和 **Project Boards** 来实现开发进度的透明化管理。

1.  **一切始于 Issue**: 任何开发任务（新功能、Bug修复、重构等）都应该从创建一个 Issue 开始。请使用我们提供的 [Issue 模板](/.github/ISSUE_TEMPLATE) 来确保信息的完整性。
2.  **认领任务**: 当你准备开始一个任务时，请将自己分配（Assign）给对应的 Issue。
3.  **使用看板**: 项目维护者会将 Issue 添加到项目看板中。请在开发过程中，及时将代表你任务的卡片在看板的不同列（如 `待办` -> `进行中` -> `待审查`）之间移动。
4.  **关联 PR**: 当你提交 Pull Request 时，请在描述中链接到对应的 Issue (例如 `Closes #42`)，这样当 PR 被合并后，相关的 Issue 将被自动关闭。

## 5. Git 工作流规范

我们遵循一个结构化的 Git 工作流，以保持版本历史的清晰和可追溯性。

### 分支命名

所有分支都应从 `main` 分支创建，并遵循 `类型/简短描述` 的格式（示例: `feat/real-time-debugging`, `fix/login-bug`）。详细的 `<类型>` 列表请见下文。

### 提交信息 (Commit Messages)

我们采用 **Conventional Commits** 规范。格式为 `<类型>[可选的作用域]: <描述>`。

**`<类型>`** 必须是以下之一：
*   **feat**: 新功能
*   **fix**: Bug 修复
*   **docs**: 文档变更
*   **style**: 代码风格
*   **refactor**: 代码重构
*   **test**: 增加或修改测试
*   **chore**: 构建过程或辅助工具的变动

## 6. 开发全流程

1.  **领取任务**: 从 Issue 列表中选择或创建一个任务，并分配给自己。
2.  **理解上下文**:
    *   仔细阅读 Issue 描述和验收标准。
    *   阅读相关的 **规范文档 (`specs/`)**。
    *   **查阅相关的架构决策记录 (`adr/`)**，特别是那些可能会影响你本次实现的关键决策。
3.  **创建分支**: 从最新的 `main` 分支，根据“分支命名”规范创建一个新的分支。
4.  **编码与测试**:
    *   进行代码开发和文档编写。
    *   为你的代码编写必要的测试，并确保所有测试都能通过 (`pytest`)。
    *   在编码过程中，可以随时运行 `pre-commit run --all-files` 来检查你的代码质量。
5.  **提交代码**: 遵循“提交信息”规范，提交你的代码。`pre-commit` 会在此时自动运行。
6.  **发起 Pull Request**:
    *   将你的分支推送到远程仓库，并创建一个指向 `main` 分支的 Pull Request。
    *   使用我们的 [Pull Request 模板](/.github/PULL_REQUEST_TEMPLATE.md) 填写所有必要信息。
7.  **代码审查与合并**: 你的 PR 需要至少一位其他团队成员的批准才能被合并。

## 7. 决策记录

*   **规范 (Specs)**: 所有对用户可见或对系统有重要影响的变更，都必须先编写一份规范文档。
*   **架构决策记录 (ADRs)**: 当一项规范的讨论中产生了对项目有长远影响的重要技术决策时（例如，选择一个特定的数据库、定义一个核心的API范式等），应将其沉淀为一份ADR文档，存放在 `adr/` 目录中。
*   **AI 协作记录**: 我们与 AI 助手的关键决策性对话摘要，会存放在 `adr/ai-sessions/` 目录中，作为项目历史的一部分。

## 8. 代码注释

*   **解释“为什么”，而不是“做什么”**。
*   为复杂的业务逻辑、算法或需要注意的陷阱添加注释。
*   使用 `# TODO:` 或 `# FIXME:` 来标记技术债。

感谢你的贡献！
