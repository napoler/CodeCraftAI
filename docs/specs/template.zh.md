# 规范：[功能或变更的标题]

- **摘要**: "[关于解决方案的一句话摘要]"
- **状态**: 草稿
- **负责人**: @username | AI 代理
- **关联任务**: `tasks/...`
- **关联日志**: `[链接到相关的讨论日志]`

---

## 第 1 部分：指令分析 (解构 & 诊断)

> *AI 代理：本部分是您必须执行的思考过程。在编写任何代码之前，请回答以下问题。*

### 1. 核心请求解构
- **此任务的根本目标是什么？**
  - *[分析用户请求，用一句话说明核心目标。]*
- **涉及哪些用户或系统？**
  - *[列出关键的参与者。]*
- **明确的需求和限制是什么？**
  - *[列出所有已声明的交付物、技术限制、性能要求等。]*

### 2. 模糊点诊断
- **哪些信息是缺失或不明确的？**
  - *[识别请求中的空白。例如：“对于无效输入，错误处理行为未被指定。”]*
- **我正在做出哪些假设？**
  - *[列出您为继续进行而做出的任何假设。如果假设很重要，必须对其进行验证。]*
- **澄清性问题 (如有):**
  - *[如果模糊点无法通过安全的假设来解决，请在此处列出您在开发前需要得到解答的问题。]*

---

## 第 2 部分：实施计划 (开发)

> *AI 代理：这是您为自己优化的内部指令。请详细说明您的行动计划。*

### 1. 角色分配
- **我的角色:** 我将扮演一名 `[例如：高级 Python 工程师, API 设计专家]`，以确保在 `[例如：代码结构, API 设计]` 方面遵循最佳实践。

### 2. 解决方案设计
- **顶层策略:**
  - *[描述您的整体方法。例如：“创建一个新的服务类来处理业务逻辑，在控制器中添加一个新的端点，并为请求体定义一个新的 DTO。”]*
- **文件变更:**
  - **创建:**
    - `[列出将要创建的新文件]`
  - **修改:**
    - `[列出现有的将要修改的文件]`
  - **删除:**
    - `[列出将要删除的文件，并说明理由]`
- **核心逻辑 / 算法:**
  - *[用伪代码或步骤列表描述任何复杂的逻辑、数据转换或算法。]*
- **API 设计 (如适用):**
  - **端点:** `[例如：POST /api/users]`
  - **请求体:** `[JSON 结构]`
  - **成功响应 (200 OK):** `[JSON 结构]`
  - **错误响应:** `[例如：400 Bad Request, 404 Not Found]`

### 3. 测试策略
- **单元测试:**
  - *[描述所需的单元测试。例如：“用有效、无效和边界情况的输入来测试 `calculate_discount` 方法。”]*
- **集成测试:**
  - *[描述任何集成测试。例如：“测试从请求到数据库交互的完整 API 端点。”]*

### 4. 代码级文档与引用
- **文档字符串 (Docstrings):**
  - *[概述新类和方法的文档计划。例如：“`UserService` 中的所有公共方法都将有完整的文档字符串，解释其用途、参数和返回值。”]*
- **引用说明 (Citations):**
  - *[如果使用了来自外部来源的代码或思想，请在此处列出。例如：“令牌生成逻辑基于 [文章链接] 中描述的算法。”]*

### 5. 文档影响分析
- **需要创建的文档:**
  - `[列出需要创建的任何新用户指南、教程或项目级 README。例如："docs/project/guides/new-api-usage.md"]`
- **需要更新的文档:**
  - `[列出现有的、需要更新的文档。例如："README.md", "docs/framework/INSTALL.md"]`

---

## 第 3 部分：输出规范 (交付)

> *AI 代理：此部分定义了最终的、预期的状态。*

- **完成的定义:**
  - [ ] 所有代码均按计划实现。
  - [ ] 所有新的和现有的测试都通过。
  - [ ] 代码质量检查（linting, formatting）通过。
  - [ ] 相关联的任务被移动到 `done` 状态。
- **风险与未知:**
  - *[列出任何潜在的风险或依赖关系。例如：“此变更依赖于一个有较低速率限制的外部 API。”]*
